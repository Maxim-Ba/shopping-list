(this["webpackJsonpshopping-list"]=this["webpackJsonpshopping-list"]||[]).push([[0],{118:function(e,t,n){e.exports=n(255)},123:function(e,t,n){},253:function(e,t,n){},255:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(30),o=n.n(s),i=(n(123),n(11)),c=n(5),l={isOpen:!1,input:"",colorSelected:"red"},u=function(e){return{type:"TOGGLE_WINDOW_CONDITION",payload:e}},p=n(6),d=n(7),m=n(9),f=n(8),h=n(10),g=(n(74),n(4)),b=n.n(g),E=n(14),v=n(25),O={groups:[{color:"red",items:[]},{color:"green",items:[]},{color:"blue",items:[]},{color:"gray",items:[]},{color:"cyan",items:[]},{color:"yellow",items:[]},{color:"indigo",items:[]},{color:"midnightblue",items:[]},{color:"salmon",items:[]},{color:"orange",items:[]}],deleted:[]},w=function(e,t){return{type:"ADD_ITEM",item:e,color:t}},y=function(e){return{type:"SET_ALL_GROUPS",payload:e}},_={title:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043a\u0443\u043f\u043e\u043a",color:"#007bff",_id:""},S=function(e){return{type:"SET_TITLE",payload:e}},C=function(e){return{type:"SET_COLOR",payload:e}},k=function(e){return{type:"SET_ID",payload:e}};function N(){return JSON.parse(localStorage.getItem("groups"))?function(){var e=Object(E.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.parse(localStorage.getItem("groups")),r=JSON.parse(localStorage.getItem("deleted"));try{t(y({groups:n,deleted:r})),t(k("")),t(C("#007bff")),t(S("\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043a\u0443\u043f\u043e\u043a"))}catch(a){console.log(a)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():function(){var e=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var L="https://safe-taiga-47540.herokuapp.com/",j="ws://safe-taiga-47540.herokuapp.com/",I={users:[],chat:[],ws:null},x=function(e){return{type:"UPDATE_CHAT",payload:e}},D=function(e){return{type:"UPDATE_USERS",payload:e}},R=function(e){return{type:"SET_WEBSOCKET",payload:e}};var A=n(31),T=n(110),W={isOpenMenu:!1,isOpenMessages:!1},U=function(e){return{type:"TOGGLE_MENU",payload:e}},M={currentUser:{},isAuth:!1},H=function(e){return{type:"SET_USER",payload:e}};var F={loader:!1};var P={lists:[],sharedLists:[]},z=function(e){return{type:"SET_LIST_OF_LISTS",payload:e}},G=Object(A.c)({itemListReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ITEM":return Object(c.a)({},e,{groups:e.groups.map((function(e){return e.color===t.color?Object(c.a)({},e,{items:[].concat(Object(v.a)(e.items),[t.item])}):e}))});case"DELETE_ITEM":return Object(c.a)({},e,{groups:e.groups.map((function(e){return e.color===t.color?Object(c.a)({},e,{items:e.items.filter((function(e,n){return t.index!==n}))}):e})),deleted:[].concat(Object(v.a)(e.deleted),[{items:t.item,color:t.color,index:t.index}])});case"REMOVE_FROM_DELETED":var n=e.deleted.findIndex((function(e){return e.color===t.color&&e.items===t.item}));return Object(c.a)({},e,{deleted:e.deleted.filter((function(e,t){return t!==n}))});case"SET_ALL_GROUPS":return Object(c.a)({},e,{groups:Object(v.a)(t.payload.groups),deleted:Object(v.a)(t.payload.deleted)});case"SET_GROUPS":return Object(c.a)({},e,{groups:Object(v.a)(t.payload)});default:return e}},modalWindowReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_WINDOW_CONDITION":return Object(c.a)({},e,{isOpen:t.payload});case"SELECT_COLOR":return Object(c.a)({},e,{colorSelected:t.payload});default:return e}},titleOfListReduser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE":return Object(c.a)({},e,{title:t.payload});case"SET_COLOR":return Object(c.a)({},e,{color:t.payload});case"SET_ID":return Object(c.a)({},e,{_id:t.payload});default:return e}},menuReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_MENU":case"SHOW_MESSAGES":return Object(c.a)({},e,{isOpenMenu:t.payload});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(c.a)({},e,{currentUser:t.payload,isAuth:!0});case"LOGOUT":return localStorage.removeItem("token"),Object(c.a)({},e,{currentUser:{},isAuth:!1});case"CHANGE_EMAIL":return Object(c.a)({},e,{currentUser:{},isAuth:!1});default:return e}},loaderReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_LOADER":return Object(c.a)({},e,{loader:!0});case"HIDE_LOADER":return Object(c.a)({},e,{loader:!1});default:return e}},listReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_LIST":return Object(c.a)({},e,{isOpen:t.payload});case"DELETE_LIST":return Object(c.a)({},e,{colorSelected:t.payload});case"SET_LIST_OF_LISTS":return Object(c.a)({},e,{lists:t.payload.map((function(e){return{name:e.name,color:e.color,_id:e._id}}))});case"SET_SHARED_LISTS":return Object(c.a)({},e,{sharedLists:t.payload.map((function(e){return{name:e.name,color:e.color,_id:e._id}}))});case"CLEAR_LISTS":return Object(c.a)({},e,{lists:[]});default:return e}},chatReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USERS":return Object(c.a)({},e,{users:Object(v.a)(t.payload)});case"UPDATE_CHAT":return Object(c.a)({},e,{chat:Object(v.a)(t.payload)});case"SET_WEBSOCKET":return Object(c.a)({},e,{ws:t.payload});default:return e}}}),B=Object(A.d)(G,Object(A.a)(T.a)),J=function(){var e=Object(E.a)(b.a.mark((function e(t){var n,r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.length>1&&void 0!==r[1]?r[1]:null,t.onopen=function(e){n?t.send(JSON.stringify({event:"connection"})):$(t,B.getState().titleOfListReduser._id,B.getState().userReducer.currentUser.id,B.getState().userReducer.currentUser.email)};case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){try{e.onmessage=function(t){var n=JSON.parse(t.data);switch(n.event){case"updateUser":if(0===n.users.length)break;break;case"wellDone":var r=B.getState().titleOfListReduser._id,a=B.getState().userReducer.currentUser.id,s=B.getState().userReducer.currentUser.email;r?$(e,r,a,s):console.log(r,"listID on firstConnectWS");break;case"updateChat":B.dispatch(x(n.message));break;case"updateGroups":B.dispatch({type:"SET_GROUPS",payload:n.groups});break;case"updateDeletedAndGroups":B.dispatch(y({groups:n.groups,deleted:n.deleted}));break;case"updateNameOfList":B.dispatch(S(n.name));break;case"updateColorOfList":B.dispatch(C(n.color))}}}catch(t){}},V=function(e,t,n,r){e.send(JSON.stringify({event:"updateGroups",groups:t,listID:n,userID:r}))},K=function(e,t,n){e.send(JSON.stringify({event:"updateUser",listID:t,userEmail:n}))},$=function(e,t,n,r){e.send(JSON.stringify({event:"firstConnect",listID:t,userID:n,user:r}))},Q=function e(t){t.onclose=function(t){if(console.info("WebSocket closed with code ".concat(t.code,"! ").concat(t.reason)),B.dispatch(R(null)),1e3!==t.code){var n;do{n=new WebSocket(j+"api/chat/")}while(!n);B.dispatch(R(n)),J(n,!0),q(n),e(n)}}},X=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(){n.props.addItem(n.props.item.items,n.props.item.color),n.props.removeFromDeleted(n.props.item.items,n.props.item.color)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"deleted-item alert-dark rounded mb-1",onClick:this.handleClick},this.props.item.items)}}]),t}(a.a.Component),Y=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"handleClick",value:function(){this.props.deleteItem(this.props.item,this.props.color,this.props.index)}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"item rounded container d-flex py-1 pl-1",onClick:function(){return e.handleClick()}},a.a.createElement("div",{className:"row w-100"},a.a.createElement("div",{className:"rounded col-2 col-md-1"},a.a.createElement("div",{className:"item__wrapper h-100 rounded",style:{backgroundColor:this.props.color,minWidth:24}})),a.a.createElement("div",{className:"item__name col-10 col-md-11"},a.a.createElement("p",{className:"m-0 text-left"},this.props.item))))}}]),t}(a.a.Component),Z=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).createItems=function(e){return e.items.map((function(t,r){return a.a.createElement(Y,{key:r,index:r,item:t,color:e.color,deleteItem:n.props.deleteItem})}))},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return 0===this.props.item.items.length?null:a.a.createElement("div",{className:"group-items rounded border"},this.createItems(this.props.item))}}]),t}(a.a.Component),ee=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).createGroupItems=function(e){return e.map((function(e,t){return a.a.createElement(Z,{key:t,item:e,deleteItem:n.props.deleteItem})}))},n.createDeletedItems=function(e){return e.map((function(e,t){return a.a.createElement(X,{key:t,item:e,addItem:n.props.addItem,removeFromDeleted:n.props.removeFromDeleted})}))},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var t,n;this.props.isAuth||(t=this.props.groups,n=this.props.deletedItems,localStorage.setItem("groups",JSON.stringify(t)),localStorage.setItem("deleted",JSON.stringify(n))),this.props.isAuth&&this.props.ws&&e.deletedItems===this.props.deletedItems&&JSON.stringify(e.groups)!==JSON.stringify(this.props.groups)&&V(this.props.ws,this.props.groups,this.props.listID,this.props.currentUser.id),this.props.isAuth&&this.props.ws&&JSON.stringify(e.deletedItems)!==JSON.stringify(this.props.deletedItems)&&function(e,t,n,r,a){e.send(JSON.stringify({event:"updateDeletedAndGroups",groups:t,deleted:n,listID:r,userID:a}))}(this.props.ws,this.props.groups,this.props.deletedItems,this.props.listID,this.props.currentUser.id)}},{key:"render",value:function(){return a.a.createElement("section",{className:"list border border-dark flex-grow-1"},a.a.createElement("div",{className:"top mb-1"},this.createGroupItems(this.props.groups)),0!==this.props.deletedItems.length?a.a.createElement("div",{className:"bottom border-top border-dark rounded pt-1 alert-secondary"},this.createDeletedItems(this.props.deletedItems)):null)}}]),t}(a.a.Component),te=Object(i.b)((function(e){return{groups:e.itemListReducer.groups,deletedItems:e.itemListReducer.deleted,inputValue:e.modalWindowReducer.input,isAuth:e.userReducer.isAuth,ws:e.chatReducer.ws,listID:e.titleOfListReduser._id,currentUser:e.userReducer.currentUser}}),(function(e){return{addItem:function(t,n){e(w(t,n))},closeModalWindow:function(t){e(u(t))},deleteItem:function(t,n,r){e(function(e,t,n){return{type:"DELETE_ITEM",item:e,color:t,index:n}}(t,n,r))},removeFromDeleted:function(t,n){e(function(e,t){return{type:"REMOVE_FROM_DELETED",item:e,color:t}}(t,n))}}}))(ee),ne=n(16),re=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(e){n.props.toggleMenuWindow(!0)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("header",{className:"d-flex justify-content-center align-items-center my-2 p-0 container-fluid"},a.a.createElement("div",{className:"row container-fluid"},a.a.createElement("div",{className:"col-12 col-sm-3 container-sm p-0 d-flex align-items-center"},a.a.createElement("button",{className:"button btn btn-primary container-fluid p-0 h-100",style:{backgroundColor:this.props.titleColor},onClick:function(t){return e.handleClick(t)}},"\u041c\u0435\u043d\u044e")),a.a.createElement("h3",{className:"m-0 p-0 col-12 col-sm-7 pb-2",style:{color:this.props.titleColor}},a.a.createElement(ne.b,{to:"/"}," ",this.props.titleList)),a.a.createElement("div",{className:"col-12 col-sm-2 d-flex justify-content-center"},a.a.createElement("div",{className:"d-flex justify-content-center align-items-center rounded-circle avatar",style:{backgroundColor:this.props.titleColor}},a.a.createElement(ne.b,{to:"/profile",className:"w-100 h-100 d-flex justify-content-center align-items-center"},a.a.createElement("div",null,this.props.isAuth?a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-person-fill",viewBox:"0 0 16 16"},a.a.createElement("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"})):a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-person-dash",viewBox:"0 0 16 16"},a.a.createElement("path",{d:"M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"}),a.a.createElement("path",{"fill-rule":"evenodd",d:"M11 7.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5z"}))))))))}}]),t}(a.a.Component),ae=Object(i.b)((function(e){return{titleList:e.titleOfListReduser.title,titleColor:e.titleOfListReduser.color,isAuth:e.userReducer.isAuth}}),(function(e){return{toggleMenuWindow:function(t){return e(U(t))}}}))(re),se=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(){n.props.toggleWindow(!0)},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return a.a.createElement("button",{className:"btn btn-primary rounded-circle button-crear-add d-flex",onClick:this.handleClick,style:{backgroundColor:this.props.titleColor}},a.a.createElement("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",className:"bi bi-plus",fill:"currentColor"},a.a.createElement("path",{fillRule:"evenodd",d:"M8 3.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H4a.5.5 0 0 1 0-1h3.5V4a.5.5 0 0 1 .5-.5z"}),a.a.createElement("path",{fillRule:"evenodd",d:"M7.5 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H8.5V12a.5.5 0 0 1-1 0V8z"})))}}]),t}(a.a.Component),oe=Object(i.b)((function(e){return{titleColor:e.titleOfListReduser.color}}),(function(e){return{toggleWindow:function(t){return e(u(t))}}}))(se),ie=n(257),ce=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(s)))).handleSubmit=function(){var e=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n.props.addItem(n.props.inputValue,n.props.colorSelected),n.props.toggleModalWindow(!1),n.props.changeInput("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleInput=function(e){n.props.changeInput(e.target.value)},n.handleSelectColor=function(e,t){e.preventDefault(),n.props.selectColor(t)},n.displayColorsBtn=function(e,t){return a.a.createElement("div",{className:"modal-window__btn-wrapper d-flex justify-content-start mt-3 w-100 flex-wrap"},e.map((function(e,r){return t===e?a.a.createElement("button",{key:r,className:"modal-window__color-btn modal-window__border border-white rounded m-1",style:{backgroundColor:e},onClick:function(t){return n.handleSelectColor(t,e)}}):a.a.createElement("button",{key:r,className:"modal-window__color-btn rounded m-1",style:{backgroundColor:e},onClick:function(t){return n.handleSelectColor(t,e)}})})))},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"modal-window__wraper border border-primary rounded-top form-group m-0 row justify-content-md-center col-lg-6 col-md-8 col-sm-10 col-12 h-50",onClick:function(e){return e.stopPropagation()}},a.a.createElement("form",{className:"modal-window__form d-flex flex-column p-3 container-fluid",onSubmit:this.handleSubmit},a.a.createElement("div",{className:"modal-window__input-container row m-0"},a.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-9 mb-1"},a.a.createElement("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",type:"text",onChange:function(t){return e.handleInput(t)},className:"w-100 h-100 modal-window__input",required:!0})),a.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-3 p-0"},a.a.createElement("button",{className:"btn btn-secondary",type:"submit"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))),this.displayColorsBtn(this.props.colors,this.props.colorSelected)))}}]),t}(a.a.Component),le=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),n.props.toggleModalWindow(!1),n.props.addItem(n.state.input,n.props.colorSelected),n.setState({input:""})},n.handleClick=function(){n.props.toggleModalWindow(!1)},n.handleInput=function(e){n.setState({input:e.target.value})},n.handleSelectColor=function(e,t){e.preventDefault(),n.props.selectColor(t)},n.displayColorsBtn=function(e,t){return a.a.createElement("div",{className:"modal-window__btn-wrapper d-flex justify-content-around mt-3 w-75"},e.map((function(e,r){return t===e?a.a.createElement("button",{key:r,className:"modal-window__color-btn modal-window__border border-white rounded",style:{backgroundColor:e},onClick:function(t){return n.handleSelectColor(t,e)}}):a.a.createElement("button",{key:r,className:"modal-window__color-btn rounded",style:{backgroundColor:e},onClick:function(t){return n.handleSelectColor(t,e)}})})))},n.state={isOpenAlertWindow:!1,input:""},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState({isOpenAlertWindow:!0})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:" vw-100 row modal-window d-flex fixed-top justify-content-center align-items-end container-fluid m-0 ",onClick:function(t){return e.handleClick(t)}},a.a.createElement(ie.a,{in:this.state.isOpenAlertWindow,timeout:1e3,classNames:{enter:"alert-enter",enterActive:"alert-enter-done",exit:"alert-exit",exitActive:"alert-exit-done"},mountOnEnter:!0,unmountOnExit:!0,onExited:function(){return e.props.toggleModalWindow(!1)}},a.a.createElement(ce,Object.assign({},this.props,{changeInput:function(t){return e.setState({input:t})},inputValue:this.state.input}))))}}]),t}(a.a.Component),ue=Object(i.b)((function(e){return{colors:e.itemListReducer.groups.map((function(e){return e.color})),colorSelected:e.modalWindowReducer.colorSelected,isOpen:e.modalWindowReducer.isOpen,listID:e.titleOfListReduser._id,ws:e.chatReducer.ws,groups:e.itemListReducer.groups}}),(function(e){return{addItem:function(t,n){return e(w(t,n))},toggleModalWindow:function(t){return e(u(t))},selectColor:function(t){return e({type:"SELECT_COLOR",payload:t})},updateGroupsWS:function(t,n,r){return e(V(t,n,r))}}}))(le),pe=n(19),de=n.n(pe),me=function(){return function(){var e=Object(E.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"SHOW_LOADER"}),e.next=4,de.a.get("".concat(L,"api/list/"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:n=e.sent,t({type:"HIDE_LOADER"}),t(z(n.data)),B.getState().titleOfListReduser._id||(t(S(n.data[0].name)),t(C(n.data[0].color)),t(y({groups:n.data[0].groups,deleted:n.data[0].deleted})),t(k(n.data[0]._id))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0,"--error--"),t({type:"HIDE_LOADER"});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},fe=function(e){return function(){var t=Object(E.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"SHOW_LOADER"}),t.next=4,de.a.get("".concat(L,"api/list/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:r=t.sent,console.log(r.data,"getList"),n({type:"HIDE_LOADER"}),n(S(r.data.name)),n(C(r.data.color)),n(y({groups:r.data.groups,deleted:r.data.deleted})),n(k(r.data._id)),a=B.getState().chatReducer.ws,s=r.data._id,a.send(JSON.stringify({event:"changeListID",listID:s})),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0,"--error--"),n({type:"HIDE_LOADER"});case 18:case"end":return t.stop()}var a,s}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()},he=function(e){return function(){var t=Object(E.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"SHOW_LOADER"}),t.next=4,de.a.get("".concat(L,"api/list/sharedLists/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:r=t.sent,n({type:"HIDE_LOADER"}),n({type:"SET_SHARED_LISTS",payload:r.data}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0,"--error--"),n({type:"HIDE_LOADER"});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},ge=function(e,t,n,r,a){return function(){var s=Object(E.a)(b.a.mark((function s(o){var i;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,o({type:"SHOW_LOADER"}),s.next=4,de.a.put("".concat(L,"api/list/save"),{name:e,color:t,_id:n,groups:r,deleted:a},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:i=s.sent,o(y({groups:i.data.groups,deleted:i.data.deleted})),o(S(i.data.name)),o(C(i.data.color)),o(k(i.data._id)),o({type:"HIDE_LOADER"}),s.next=16;break;case 12:s.prev=12,s.t0=s.catch(0),console.log(s.t0,"--error--"),o({type:"HIDE_LOADER"});case 16:case"end":return s.stop()}}),s,null,[[0,12]])})));return function(e){return s.apply(this,arguments)}}()},be=n(71),Ee=function(e){return a.a.createElement("div",{className:"d-flex justify-content-center align-items-center "},a.a.createElement("div",{className:e.visible?"alert alert-warning visible":"alert alert-warning invisible",role:"alert"},"\u0422\u044b \u0437\u0430\u0431\u044b\u043b\u0430 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0446\u0432\u0435\u0442!"))},ve=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleChangeComplete=function(e){n.setState({color:e.hex}),n.setState({colorRequire:!1})},n.handleClickDelete=function(e){n.props.toggleMenuWindow(!1),n.props.menuLocaleState({isOpenAlertWindow:!1,isOpenSubmenu:!1,isOpenEditTitle:!1,isOpenCreateNewList:!1}),n.setState({colorRequire:!1})},n.handleClickEdit=function(e){if("string"===typeof n.state.color)return n.props.saveList(n.state.valueTitle,n.state.color,n.props._id,n.props.groups,n.props.deleted),n.props.toggleMenuWindow(!1),n.props.menuLocaleState({isOpenAlertWindow:!1,isOpenSubmenu:!1,isOpenEditTitle:!1,isOpenCreateNewList:!1}),null;n.setColorRequire()},n.handleClickCreateNew=function(e){n.props.toggleMenuWindow(!1),n.props.menuLocaleState({isOpenAlertWindow:!1,isOpenSubmenu:!1,isOpenEditTitle:!1,isOpenCreateNewList:!1}),n.setState({colorRequire:!1}),n.props.ceateList(n.state.valueTitle,n.state.color)},n.state={valueTitle:"",color:{},colorRequire:!1},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"setColorRequire",value:function(){var e=this;this.setState({colorRequire:!0}),setTimeout((function(){return e.setState({colorRequire:!1})}),3e3)}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"bottom-submenu position-absolute bg-danger w-100 h-75 d-flex flex-column",onClick:function(e){return e.stopPropagation()}},a.a.createElement(Ee,{visible:this.state.colorRequire}),this.props.isOpenEditTitle&&a.a.createElement("div",{className:"container d-flex flex-column justify-content-center align-items-center mb-3"},a.a.createElement("h3",{className:"bottom-submenu__title"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"),a.a.createElement("input",{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430",className:" mb-3",onChange:function(t){return e.setState({valueTitle:t.target.value})}}),a.a.createElement(be.a,{color:this.state.color,onChangeComplete:this.handleChangeComplete}),a.a.createElement(ne.b,{to:"/",className:"btn btn-light mt-3",onClick:function(t){return e.handleClickEdit(t)}},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c")),this.props.isOpenCreateNewList&&a.a.createElement("div",{className:"container d-flex flex-column justify-content-center align-items-center mb-3"},a.a.createElement("h3",{className:"bottom-submenu__title"},"\u041d\u043e\u0432\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a"),a.a.createElement("input",{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430",className:" mb-3",onChange:function(t){return e.setState({valueTitle:t.target.value})}}),a.a.createElement(be.a,{color:this.state.color,onChangeComplete:this.handleChangeComplete}),a.a.createElement(ne.b,{to:"/",className:"btn btn-light mt-3",onClick:function(t){return e.handleClickCreateNew(t)}},"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c")),this.props.deleteCurrentList&&a.a.createElement("div",{className:"container d-flex flex-column justify-content-center align-items-center"},a.a.createElement("h3",{className:"bottom-submenu__title mt-2"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"),a.a.createElement("div",{className:"bottom-submeny__wrapper-botton d-flex justify-content-around w-50 mt-2"},a.a.createElement(ne.b,{to:"/",className:"btn btn-warning",onClick:function(t){return e.handleClickDelete(t),e.props.deleteList(e.props._id)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),a.a.createElement(ne.b,{to:"/",className:"btn btn-light"},"\u041e\u0442\u043c\u0435\u043d\u0430"))))}}]),t}(a.a.Component),Oe=Object(i.b)((function(e){return{_id:e.titleOfListReduser._id,groups:e.itemListReducer.groups,deleted:e.itemListReducer.deleted}}),(function(e){return{saveList:function(t,n,r,a,s){e(ge(t,n,r,a,s))},toggleMenuWindow:function(t){e(U(t))},ceateList:function(t,n){return e(function(e,t){return function(){var n=Object(E.a)(b.a.mark((function n(r){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:"SHOW_LOADER"}),n.next=4,de.a.post("".concat(L,"api/list/create"),{name:e,color:t},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:a=n.sent,r(S(a.data.name)),r(C(a.data.color)),r(y({groups:a.data.groups,deleted:a.data.deleted})),r(k(a.data._id)),r({type:"HIDE_LOADER"}),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),r({type:"HIDE_LOADER"}),console.log(n.t0.response.data.message,"--error--");case 16:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},deleteList:function(t){return e(function(e){return function(){var t=Object(E.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"SHOW_LOADER"}),t.next=4,de.a.delete("".concat(L,"api/list/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:r=t.sent,n({type:"HIDE_LOADER"}),n(z(r.data)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0,"--error--"),n({type:"HIDE_LOADER"});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(ve),we=function(e){return a.a.createElement("div",{className:"menu__item alert-primary w-100",onClick:function(t){if(function(){switch(e.titleSubMenuLinks){case"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a":e.menuLocaleState({isOpenEditTitle:!1,isOpenCreateNewList:!0,deleteCurrentList:!1});break;case"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0441\u043f\u0438\u0441\u043e\u043a":e.menuLocaleState({isOpenEditTitle:!1,isOpenCreateNewList:!1,deleteCurrentList:!0});break;case"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0435":e.menuLocaleState({isOpenEditTitle:!1,isOpenCreateNewList:!1,deleteCurrentList:!1}),e.saveList();break;case"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430":e.menuLocaleState({isOpenEditTitle:!0,isOpenCreateNewList:!1,deleteCurrentList:!1})}}(),"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0435"!==e.titleSubMenuLinks)return e.isOpenSubmenu(t)}},e.titleSubMenuLinks)},ye=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={isOpenAlertWindow:!1,isOpenSubmenu:!1,isOpenEditTitle:!1,isOpenCreateNewList:!1,deleteCurrentList:!1,titleSubMenuLinks:["\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0441\u043f\u0438\u0441\u043e\u043a","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0435","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430"]},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"saveListHandler",value:function(){var e=this.props,t=e.title,n=e.color,r=e._id,a=e.groups,s=e.deleted;r&&this.props.saveList(t,n,r,a,s),this.props.toggleMenuWindow(!1)}},{key:"componentDidMount",value:function(){this.setState({isOpenAlertWindow:!0}),this.setState({isOpenEditTitle:!1})}},{key:"closeAlertWindow",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.toggleMenuWindow(!1)}},{key:"isOpenSubmenu",value:function(e){e.stopPropagation(),this.setState({isOpenSubmenu:!0})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"menu__background modal-window fixed-top",onClick:function(t){return e.closeAlertWindow(t)}},a.a.createElement(ie.a,{in:this.state.isOpenSubmenu,timeout:300,classNames:"menu-transition",unmountOnExit:!0},a.a.createElement(Oe,{isOpenEditTitle:this.state.isOpenEditTitle,isOpenCreateNewList:this.state.isOpenCreateNewList,deleteCurrentList:this.state.deleteCurrentList,menuLocaleState:function(t){return e.setState(t)}})),a.a.createElement(ie.a,{in:this.state.isOpenAlertWindow,timeout:300,classNames:"menu-transition",unmountOnExit:!0},a.a.createElement("div",{className:"menu container-fluid d-flex flex-column justify-content-start align-items-center px-0 zindex-sticky shadow",onClick:function(e){return e.stopPropagation()}},this.state.titleSubMenuLinks.map((function(t){return e.props.isAuth?a.a.createElement(we,{key:t,titleSubMenuLinks:t,isOpenSubmenu:function(t){return e.isOpenSubmenu(t)},menuLocaleState:function(t){return e.setState(t)},saveList:function(){return e.saveListHandler()}}):null})),this.props.isAuth&&a.a.createElement(ne.b,{to:"/messages",activeClassName:"menu__item alert-primary w-100",className:"menu__item alert-primary w-100"},a.a.createElement("div",{className:"menu__item alert-primary w-100",onClick:function(t){e.props.toggleMenuWindow(!1)}},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f")),a.a.createElement(ne.b,{to:"/profile",activeClassName:"menu__item alert-primary w-100",className:"menu__item alert-primary w-100"},a.a.createElement("div",{className:"menu__item alert-primary w-100",onClick:function(t){e.props.toggleMenuWindow(!1)}},"\u041c\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c")))))}}]),t}(a.a.Component),_e=Object(i.b)((function(e){return{isOpenMenu:e.menuReducer.isOpenMenu,title:e.titleOfListReduser.title,color:e.titleOfListReduser.color,_id:e.titleOfListReduser._id,groups:e.itemListReducer.groups,deleted:e.itemListReducer.deleted,isAuth:e.userReducer.isAuth}}),(function(e){return{toggleMenuWindow:function(t){return e(U(t))},saveList:function(t,n,r,a,s){return e(ge(t,n,r,a,s))}}}))(ye),Se=n(13),Ce=(n(253),function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={burgerClicked:!1,isOpenForm:!1,messageField:"",newUserInput:""},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"handleClickBurger",value:function(e){this.setState({burgerClicked:!this.state.burgerClicked,isOpenForm:!1})}},{key:"setFieldValue",value:function(e){this.setState({messageField:e.target.value})}},{key:"sendMessageHandle",value:function(e){var t,n,r,a,s;e.preventDefault(),this.props.ws&&(t=this.props.ws,n=this.state.messageField,r=this.props.currentUser.id,a=this.props.currentUser.email,s=this.props.listID,t.send(JSON.stringify({event:"updateChat",message:n,user:r,email:a,listID:s})),this.setState({messageField:""}))}},{key:"addNewUser",value:function(e){e.preventDefault(),K(this.props.ws,this.props.listID,this.state.newUserInput),this.setState({newUserInput:""})}},{key:"addForm",value:function(e){this.setState({isOpenForm:!this.state.isOpenForm})}},{key:"componentDidMount",value:function(){this.props.isAuth&&this.props.getChat(this.props.listID)}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"messages h-100 d-flex justify-content-start container-sm flex-grow-1"},!this.props.isAuth&&a.a.createElement(Se.a,{to:"/profile"}),window.innerWidth>575?a.a.createElement("aside",{className:"overflow-hidden mh-100  messages__aside d-flex flex-column w-25 rounded",style:{backgroundColor:"".concat(this.props.titleColor)}},a.a.createElement("div",{className:"zindex-1000",style:{backgroundColor:"".concat(this.props.titleColor)}},a.a.createElement("p",{className:"border-bottom m-1"},"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438 \u0447\u0430\u0442\u0430:"),a.a.createElement("div",{className:"zindex-1000"}),this.props.users.map((function(e,t){return a.a.createElement("p",{userid:e._id,key:t},e.email)}))),a.a.createElement("div",{className:"zindex-1 messages__form-wrapper ".concat(this.state.isOpenForm&&"messages__form-wrapper_active")},a.a.createElement("form",{className:"messages__add-user-form"},a.a.createElement("input",{value:this.state.newUserInput,placeholder:"E-mail...",type:"text",className:"messages__add-user-input",onChange:function(t){return e.setState({newUserInput:t.target.value})}}),a.a.createElement("button",{className:"btn btn-primary border",onClick:function(t){return e.addNewUser(t)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),a.a.createElement("button",{className:"btn btn-dark border m-1 messages__add-user",style:{backgroundColor:"".concat(this.props.titleColor)},onClick:function(t){return e.addForm(t)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430"))):a.a.createElement("button",{className:"btn-burger d-flex flex-column justify-content-around align-items-center ",style:{backgroundColor:"".concat(this.props.titleColor)},onClick:function(t){return e.handleClickBurger(t)}},a.a.createElement("div",{className:"btn-burger__item"}),a.a.createElement("div",{className:"btn-burger__item"}),a.a.createElement("div",{className:"btn-burger__item"})),a.a.createElement("div",{className:"messages__chat-wrapper container d-flex justify-content-start w-75 flex-column ml-1 p-0 overflow-hidden"},a.a.createElement("div",{className:"messages__chat border border-dark w-100 container rounded flex-grow-1 px-0"},this.state.burgerClicked&&a.a.createElement("div",{className:""},a.a.createElement("aside",{className:"overflow-hidden mh-100 messages__aside d-flex flex-column w-100 rounded"},a.a.createElement("div",{className:"zindex-1000",style:{backgroundColor:"".concat(this.props.titleColor)}},a.a.createElement("p",{className:"border-bottom m-1"},"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438 \u0447\u0430\u0442\u0430:"),a.a.createElement("div",{className:"zindex-1000"}),this.props.users.map((function(e,t){return a.a.createElement("p",{userid:e._id,key:t},e.email)}))),a.a.createElement("div",{className:"zindex-1 messages__form-wrapper ".concat(this.state.isOpenForm&&"messages__form-wrapper_active")},a.a.createElement("form",{className:"messages__add-user-form"},a.a.createElement("input",{placeholder:"E-mail...",type:"text",className:"messages__add-user-input",onChange:function(t){return e.setState({newUserInput:t.target.value})}}),a.a.createElement("button",{className:"btn btn-primary border",onClick:function(t){return e.addNewUser(t)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),a.a.createElement("button",{className:"btn btn-dark border m-1 messages__add-user",style:{backgroundColor:"".concat(this.props.titleColor)},onClick:function(t){return e.addForm(t)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430")))),this.props.chat.map((function(t,n){return a.a.createElement("div",{key:n,className:"".concat(t.userID===e.props.currentUser.id?"text-right":"text-left"," ")},a.a.createElement("span",{className:"  font-weight-normal"},a.a.createElement("span",{className:"font-italic"},t.email," :"),t.message))}))),a.a.createElement("form",{className:"messages__chat-input-wrapper d-flex mt-1 row w=100"},a.a.createElement("div",{className:"col-12 col-sm-9 pr-sm-1 pr-md-3"},a.a.createElement("input",{type:"text",value:this.state.messageField,className:"messages__chat-input form-control ",placeholder:"\u041d\u0430\u0431\u0435\u0440\u0438\u043a\u0430 \u0442\u0435\u043a\u0441\u0442 ...",onChange:function(t){return e.setFieldValue(t)}})),a.a.createElement("div",{className:"col-12 col-sm-3 p-sm-0 px-md-3"},a.a.createElement("button",{className:"messages__btn btn btn-primary p-0 h-100 w-100",style:{backgroundColor:"".concat(this.props.titleColor)},onClick:function(t){return e.sendMessageHandle(t)}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))))}}]),t}(a.a.Component)),ke=Object(i.b)((function(e){return{titleColor:e.titleOfListReduser.color,ws:e.chatReducer.ws,users:e.chatReducer.users,chat:e.chatReducer.chat,currentUser:e.userReducer.currentUser,listID:e.titleOfListReduser._id,isAuth:e.userReducer.isAuth}}),(function(e){return{updateChat:function(t){return e(x(t))},updateUser:function(t){return e(D(t))},getChat:function(t){return e(function(e){return function(){var t=Object(E.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"SHOW_LOADER"}),t.next=4,de.a.post("".concat(L,"api/chat/"),{listID:e},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:r=t.sent,n({type:"HIDE_LOADER"}),n(x(r.data.messages)),n(D(r.data.users)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:"HIDE_LOADER"}),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(Ce),Ne=function(){var e=Object(E.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de.a.post("".concat(L,"api/user/registration"),{email:t,password:n});case 3:r=e.sent,alert(r.data.message),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),console.log(e.t0.response.data.message,"--error--");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),Le=function(e){return a.a.createElement("p",{className:"rounded list-of-list mt-1 ".concat(e.nowSelected===e.list._id&&"border"),style:{backgroundColor:e.list.color},onClick:function(){return e.selectList(e.list._id)}},e.list.name)},je=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"handleSelectList",value:function(e){this.props.getList(e)}},{key:"componentDidMount",value:function(){if(this.props.isAuth)return this.props.getSharedList(this.props.currentUser.id)}},{key:"componentDidUpdate",value:function(e){if(this.props.isAuth!==e.isAuth&&this.props.isAuth)return this.props.getSharedList(this.props.currentUser.id)}},{key:"render",value:function(){var e=this;return 0!==this.props.sharedLists.length&&a.a.createElement("section",null,a.a.createElement("p",null,"\u0421\u043f\u0438\u0441\u043a\u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439:"),this.props.sharedLists.map((function(t,n){return a.a.createElement(Le,{selectList:function(t){return e.handleSelectList(t)},nowSelected:e.props.selectedListId,list:t,key:n})})))}}]),t}(a.a.Component),Ie=Object(i.b)((function(e){return{sharedLists:e.listReducer.sharedLists,currentUser:e.userReducer.currentUser}}),(function(e){return{getSharedList:function(t){return e(he(t))},getList:function(t){return e(fe(t))}}}))(je),xe=n(22),De=function(e){var t=Object(r.useState)(""),n=Object(xe.a)(t,2),s=n[0],o=n[1],i=Object(r.useState)(""),c=Object(xe.a)(i,2),l=c[0],u=c[1],p=Object(r.useState)(""),d=Object(xe.a)(p,2),m=d[0],f=d[1],h=Object(r.useState)(!1),g=Object(xe.a)(h,2),b=g[0],E=g[1];return Object(r.useEffect)((function(){return function(){if(s&&m&&l&&m===l)return E(!0);E(!1)}()}),[s,m,l]),a.a.createElement("div",{className:"modal-window d-flex fixed-top justify-content-center align-items-center",onClick:function(){return e.closeChPasForm({changePasswordFormIsOpen:!1})}},a.a.createElement("form",{className:"registration__form bg-light p-3",onClick:function(e){return e.stopPropagation()}},a.a.createElement("h3",{className:"registration"},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"Password"},"\u0421\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"),a.a.createElement("input",{type:"password",className:"form-control",id:"Password",value:s,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 c\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){o(e.target.value)}})),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"Password1"},"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"),a.a.createElement("input",{type:"password",className:"form-control",id:"Password1",value:l,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){u(e.target.value)}}),a.a.createElement("input",{type:"password",className:"form-control mt-1",id:"Password2",value:m,placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){f(e.target.value)}})),a.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!b,onClick:function(){return e.closeChPasForm({changePasswordFormIsOpen:!1}),e.setnewpassword(e.email,s,l)}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))},Re=function(e){var t=Object(r.useState)(""),n=Object(xe.a)(t,2),s=n[0],o=n[1],i=Object(r.useState)(""),c=Object(xe.a)(i,2),l=c[0],u=c[1];return a.a.createElement("div",{className:"modal-window d-flex fixed-top justify-content-center align-items-center",onClick:function(){return e.closeForm({loginWindowIsOpen:!1})}},a.a.createElement("form",{className:"registration__form bg-info p-3",onClick:function(e){return e.stopPropagation()}},a.a.createElement("h3",{className:"registration"},"\u0412\u0445\u043e\u0434"),a.a.createElement("div",{className:"form-group "},a.a.createElement("label",{htmlFor:"exampleInputEmail1"},"\u0410\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b"),a.a.createElement("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",value:s,onChange:function(e){return o(e.target.value)},required:!0})),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"exampleInputPassword1"},"\u041f\u0430\u0440\u043e\u043b\u044c"),a.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",value:l,onChange:function(e){return u(e.target.value)},required:!0})),a.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(){return e.closeForm({loginWindowIsOpen:!1}),e.loginHandler(s,l)}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))},Ae=function(e){var t=Object(r.useState)(""),n=Object(xe.a)(t,2),s=n[0],o=n[1],i=Object(r.useState)(""),c=Object(xe.a)(i,2),l=c[0],u=c[1];return a.a.createElement("div",{className:"modal-window d-flex fixed-top justify-content-center align-items-center",onClick:function(){return e.closeForm({redistrationWindowIsOpen:!1})}},a.a.createElement("form",{className:"registration__form bg-success p-3",onClick:function(e){return e.stopPropagation()}},a.a.createElement("h3",{className:"registration"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"exampleInputEmail1"},"\u0410\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b"),a.a.createElement("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",value:s,onChange:function(e){return o(e.target.value)},required:!0}),a.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"\u041c\u044b \u043d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0438\u043a\u043e\u043c\u0443 \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0434\u0438\u043c \u0412\u0430\u0448\u0443 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0443\u044e \u043f\u043e\u0447\u0442\u0443.")),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"exampleInputPassword1"},"\u041f\u0430\u0440\u043e\u043b\u044c"),a.a.createElement("input",{type:"password",className:"form-control",id:"exampleInputPassword1",value:l,onChange:function(e){return u(e.target.value)},required:!0})),a.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(t){return e.closeForm({redistrationWindowIsOpen:!1}),e.registrationHandler(s,l),t.preventDefault()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))},Te=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={loginWindowIsOpen:!1,redistrationWindowIsOpen:!1,changePasswordFormIsOpen:!1,shareListForm:!1,newUserInput:""},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"loginHandler",value:function(e,t){this.props.login(e,t)}},{key:"registrationHandler",value:function(e,t){Ne(e,t)}},{key:"handleSelectList",value:function(e){this.props.getList(e)}},{key:"addNewUser",value:function(e){e.preventDefault(),K(this.props.ws,this.props.selectedListId,this.state.newUserInput),this.setState({newUserInput:""})}},{key:"componentDidMount",value:function(){if(this.props.isAuth)return this.props.getSharedList(this.props.userID),this.props.getLists(this.props.userID)}},{key:"componentDidUpdate",value:function(e){if(this.props.isAuth!==e.isAuth&&this.props.isAuth&&localStorage.getItem("token"))return this.props.getSharedList(this.props.userID),this.props.getLists(this.props.userID)}},{key:"openSendfield",value:function(e){e.preventDefault(),this.setState({shareListForm:!this.state.shareListForm})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"profile d-flex flex-column justify-content-start container-fluid "},this.state.changePasswordFormIsOpen&&a.a.createElement(De,{closeChPasForm:function(t){return e.setState(t)},email:this.props.email,setnewpassword:function(t,n,r){return e.props.changePassword(t,n,r)}}),this.props.isAuth?a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md"},a.a.createElement("div",{className:"profile__data d-flex flex-column justify-content-start align-items-start"},a.a.createElement("p",{className:"profile__email"},"\u041f\u043e\u0447\u0442\u0430 : ",this.props.email),a.a.createElement("button",{className:"profile__close btn border border-dark w-md-50 bg-light",style:{"\u0441olor":this.props.titleColor},onClick:function(){return e.setState({changePasswordFormIsOpen:!0})}},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"))),a.a.createElement("div",{className:"col-md"},a.a.createElement("p",null,"\u0421\u043f\u0438\u0441\u043a\u0438 \u043f\u043e\u043a\u0443\u043f\u043e\u043a:"),this.props.lists.map((function(t,n){return a.a.createElement(Le,{selectList:function(t){return e.handleSelectList(t)},nowSelected:e.props.selectedListId,list:t,key:n})})),a.a.createElement("div",{className:"container overflow-hidden pb-1"},a.a.createElement("form",{className:"row profile__form-wrapper ".concat(this.state.shareListForm&&"profile__form-wrapper_active")},a.a.createElement("div",{className:"col-12 mb-2"},a.a.createElement("input",{className:"w-100 rounded",type:"email",name:"email",id:"email",placeholder:"Email \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f...",value:this.state.newUserInput,onChange:function(t){return e.setState({newUserInput:t.target.value})}})),a.a.createElement("div",{className:"col-12 mb-2"},a.a.createElement("button",{className:"btn btn-warning w-100 text-center",onClick:function(t){return e.addNewUser(t)}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f"))),a.a.createElement("button",{disabled:!this.props.selectedListId,className:"btn btn-warning",onClick:function(t){return e.openSendfield(t)}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0441\u043f\u0438\u0441\u043a\u043e\u043c"),a.a.createElement(Ie,null)))),a.a.createElement("div",{className:"row mt-2"},a.a.createElement("div",{className:"col-12 col-sm-6 mt-3"},a.a.createElement(ne.b,{to:"/",className:"profile__close btn ",style:{backgroundColor:this.props.titleColor}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")),a.a.createElement("div",{className:"col-12 col-sm-6 mt-3"},a.a.createElement("button",{className:"profile__close btn ",style:{backgroundColor:this.props.titleColor},onClick:function(){e.props.clearLists(),e.props.logout(),e.props.setListFromStorage(),e.props.ws&&e.props.ws.close(1e3,"\u041e\u0422\u041a\u041b\u042e\u0427\u0415\u041d\u0418\u0415 \u041a\u041b\u0418\u0415\u041d\u0422\u0410...")}},"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u043f\u0440\u043e\u0444\u0438\u043b\u044f")))):a.a.createElement("div",{className:"container-fluid"},this.state.loginWindowIsOpen?a.a.createElement(Re,{closeForm:function(t){return e.setState(t)},loginHandler:function(t,n){return e.loginHandler(t,n)}}):null,this.state.redistrationWindowIsOpen?a.a.createElement(Ae,{closeForm:function(t){return e.setState(t)},registrationHandler:function(t,n){return e.registrationHandler(t,n)}}):null,a.a.createElement("div",{className:"row justify-content-around"},a.a.createElement("div",{className:"col-sm-6 mt-3"},a.a.createElement("button",{className:"btn btn-info",onClick:function(){return e.setState({loginWindowIsOpen:!0})}},"\u0412\u043e\u0439\u0442\u0438")),a.a.createElement("div",{className:"col-sm-6 mt-3"},a.a.createElement("button",{className:"btn btn-success",onClick:function(){return e.setState({redistrationWindowIsOpen:!0})}},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))),!this.props.isAuth&&a.a.createElement("p",null,"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0438\u043b\u0438 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u043f\u0438\u0441\u043a\u043e\u0432"))}}]),t}(a.a.Component),We=Object(i.b)((function(e){return{titleColor:e.titleOfListReduser.color,isAuth:e.userReducer.isAuth,email:e.userReducer.currentUser.email,lists:e.listReducer.lists,selectedListId:e.titleOfListReduser._id,ws:e.chatReducer.ws,userID:e.userReducer.currentUser.id}}),(function(e){return{toggleMenuWindow:function(t){return e(U(t))},login:function(t,n){return e(function(e,t){return function(){var n=Object(E.a)(b.a.mark((function n(r){var a,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:"SHOW_LOADER"}),n.next=4,de.a.post("".concat(L,"api/user/login"),{email:e,password:t});case 4:return a=n.sent,r({type:"HIDE_LOADER"}),r(H(a.data.user)),localStorage.setItem("token",a.data.token),n.t0=r,n.next=11,me();case 11:n.t1=n.sent,(0,n.t0)(n.t1),s=new WebSocket(j+"api/chat/"),r(R(s)),J(s),q(s),Q(s),n.next=24;break;case 20:n.prev=20,n.t2=n.catch(0),console.log(n.t2),r({type:"HIDE_LOADER"});case 24:case"end":return n.stop()}}),n,null,[[0,20]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))},logout:function(){return e({type:"LOGOUT"})},getLists:function(){return e(me())},getList:function(t){return e(fe(t))},clearLists:function(){return e({type:"CLEAR_LISTS"})},setListFromStorage:function(){return e(N())},getSharedList:function(t){return e(he(t))},changePassword:function(t,n,r){return e(function(e,t,n){return function(){var r=Object(E.a)(b.a.mark((function r(a){var s;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:"SHOW_LOADER"}),r.next=4,de.a.put("".concat(L,"api/user/changePassword"),{email:e,password:t,newPassword:n});case 4:s=r.sent,a({type:"HIDE_LOADER"}),alert(s.data.message),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0),a({type:"HIDE_LOADER"});case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()}(t,n,r))}}}))(Te),Ue=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"spinner__wrapper"},a.a.createElement("div",{className:"spinner-border",style:{color:this.props.color,backgroundColor:this.props.color},role:"status"},a.a.createElement("span",{className:"visually-hidden"})))}}]),t}(a.a.Component),Me=Object(i.b)((function(e){return{titleColor:e.titleOfListReduser.color}}),(function(e){return{}}))(Ue);function He(){var e=Object(i.c)(),t=function(t){t.preventDefault(),localStorage.setItem("groups",null),localStorage.setItem("deleted",null),e(y({groups:O.groups,deleted:[]}))};return a.a.createElement("button",{className:"btn btn-warning rounded-circle button-crear-add d-flex ",onClick:function(e){return t(e)}},a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",fill:"currentColor",className:"bi bi-arrow-90deg-left",viewBox:"0 0 16 16"},a.a.createElement("path",{fillRule:"evenodd",d:"M1.146 4.854a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H12.5A2.5 2.5 0 0 1 15 6.5v8a.5.5 0 0 1-1 0v-8A1.5 1.5 0 0 0 12.5 5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4z"})))}var Fe=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.isAuth||this.props.setListFromStorage()}},{key:"componentWillUnmount",value:function(){this.props.ws&&this.props.ws.close(1e3,"\u041e\u0422\u041a\u041b\u042e\u0427\u0415\u041d\u0418\u0415 \u041a\u041b\u0418\u0415\u041d\u0422\u0410..."),localStorage.removeItem("token"),this.props.clearLists()}},{key:"componentDidUpdate",value:function(e){this.props.isAuth||(this.props.clearLists(),this.props.setListFromStorage()),null==e.ws&&this.props.ws&&1===this.props.ws.readyState&&this.props.listID&&$(this.props.ws,this.props.listID,this.props.currentUser.id,this.props.currentUser.email)}},{key:"render",value:function(){return a.a.createElement("div",{className:"App mx-auto "},this.props.loader&&a.a.createElement(Me,null),this.props.isOpenMenu&&a.a.createElement(_e,null),a.a.createElement("main",{className:"container-sm d-flex flex-column justify-content-between main"},a.a.createElement(ae,null),a.a.createElement(Se.d,null,a.a.createElement(Se.b,{path:"/messages",history:this.props.history},a.a.createElement(ke,null)),a.a.createElement(Se.b,{path:"/profile",history:this.props.history},a.a.createElement(We,null)),a.a.createElement(Se.b,{path:"/",history:this.props.history},a.a.createElement(te,null),a.a.createElement("div",{className:"d-flex justify-content-".concat(this.props.isAuth?"center":"between"," button-add")},a.a.createElement(oe,null),!this.props.isAuth&&a.a.createElement(He,null)))),a.a.createElement("footer",{className:"d-flex justify-content-end align-items-end footer"},a.a.createElement("p",{className:"mb-1"},"\xa9 \u0411\u0430\u043b\u0430\u0448\u043e\u0432 \u041c\u0430\u043a\u0441\u0438\u043c"))),this.props.isOpen&&a.a.createElement(ue,null))}}]),t}(a.a.Component),Pe=Object(i.b)((function(e){return{isOpen:e.modalWindowReducer.isOpen,isOpenMenu:e.menuReducer.isOpenMenu,isOpenMessages:e.menuReducer.isOpenMessages,loader:e.loaderReducer.loader,isAuth:e.userReducer.isAuth,ws:e.chatReducer.ws,listID:e.titleOfListReduser._id,currentUser:e.userReducer.currentUser}}),(function(e){return{toggleModalWindow:function(t){e(u(t))},showMessages:function(t){e(function(e){return{type:"SHOW_MESSAGES",payload:e}}(t))},setListFromStorage:function(){return e(N())},clearLists:function(){return e({type:"CLEAR_LISTS"})}}}))(Fe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(254);var ze=n(115),Ge=Object(ze.a)();o.a.render(a.a.createElement(ne.a,{history:Ge},a.a.createElement(i.a,{store:B},a.a.createElement(Pe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,t,n){}},[[118,1,2]]]);
//# sourceMappingURL=main.2375e10e.chunk.js.map